<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
	  template="/public/template_initial.xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
 
	<!-- TOP BAR DEFINE -->
	<ui:define name="top_bar">
		<ui:include src="/public/top_bar-admin.xhtml"/>
	</ui:define>
  
  	<!-- NAV BAR DEFINE -->
	<ui:define name="nav_bar">
		<ui:include src="/public/nav_bar-admin.xhtml"/>
	</ui:define>	

	<!-- CONTENT DEFINE -->
	<ui:define name="page_content">	

		<div id="content">
            <div class="container">	
            
				<h:form
            		id="frm-dash">
            		
					<div class="col-md-12">
	                
	                    <ul class="breadcrumb">
	                        <li><a href="#">Home</a></li>
	
	                        <li>
	                        	Dashboard
	                        </li>
	                    </ul>
	                    
	                </div>
	                
	                <div class="col-md-12">
		               	<h:messages 
				    	  	id="messages"
					      	errorClass="alert alert-block alert-danger fade in"
					      	infoClass="alert alert-block alert-success fade in"
				     	 	style="padding-left:0px"
				     	 	globalOnly="true"/>
				     	 	

	                </div>                
	                
	                <div class="col-md-9">
	
	                    <div class="box" id="box-configuracoes">
	        	
	        				<h3>Configurações</h3>
						       	
								<div class="row">
					                <div class="col-md-12">
					                 	
										<div class="col-sm-12"> 
											<div class="form-group">
						                        
					                            <label for="check-habilitado">Login</label>
					                            <h:selectBooleanCheckbox
					                            	id="check-habilitado" 
					                            	value="#{dashboardBean.login}">
					                            	<f:ajax/>
					                            </h:selectBooleanCheckbox>
						                 	</div>
						            	</div>		
						            	
										<div class="col-sm-12"> 
											<div class="form-group">
						                        
					                            <label for="input-msg">Mensagem</label>
					                            <h:inputText 
					                            	pt:type="text" 
					                            	class="form-control" 
					                            	id="input-msg" 
					                            	pt:placeholder="Informe a mensagem para desabilitar o login."
					                            	value="#{dashboardBean.msg}">
					                            	
					                          	</h:inputText>
					                          	
					                        </div>
					                 	</div>									            							                 		
					                 	
			                        	<div class="col-sm-12 text-center">                        
					                        <h:commandButton
					                        	class="btn btn-primary"
					                        	value="Configurar"
					                        	action="#{dashboardBean.atualiza()}">
					                        	
					                        	<f:ajax
					                        		execute="@form"
					                        		render="@form"/>
				                        	</h:commandButton>
			                        	</div>
					    			</div><!-- /.col-md-12 -->
			                         
			                	</div><!-- /.row -->
					    
					    </div><!-- /.box-cadastro -->
					</div><!-- /#col-md-row -->
					
					<div class="col-md-3">
	                    <div class="box" id="box-configuracoes">
	        	
	        				<h3># usuários logados</h3>
						       	
								<div class="row">
					                <div class="col-md-12">
					                	<p align="center"><span style="font-size: 102px">#{dashboardBean.qtdUsuariosLogados()}</span></p>
					                </div>
					            </div>
					    </div>
					</div>
					
	                <h:panelGroup
	                	id="panel-logins">	                
	                
	 					<div class="col-md-12" id="table">
					
				            <div class="box">
				
			                    <h3>Usuário logados no sistema</h3>
			                    
			                    <h:panelGroup
			                    	id="panel-itens">
			                    
				                    <div class="table-responsive">
				                        <table class="table table-striped table-advance table-hover table-small">
				                            <thead>
				                                <tr>
				                                	<th style="width:30px">Usuário</th>
				                                    <th style="width:300px">Nome</th>
				                                    <th style="width:200px; overflow: hidden">Data e hora do login</th>
				                                    <th style="width:200px; overflow: hidden">Última interação</th>
				                                </tr>
				                            </thead>
				                            
				                            <tbody>
				                            
												<ui:repeat 
													var="item" 
												   	value="#{dashboardBean.logins}">		                          
													<tr>
													   	
														<td>#{item.usuario.login}</td>
														<td>#{item.usuario.nome}</td>
													   	<td>
													   		<h:outputText 
													   			value="#{item.dataHoraLogin}">
													   			
													   			<f:converter
													   				converterId="localDateTimeFacesConverter"/>
													   		</h:outputText>
													   	</td>
													   	<td>
													   		<h:outputText 
													   			value="#{item.horarioDaUltimaAcao}">
													   			
													   			<f:converter
													   				converterId="localDateTimeFacesConverter"/>
													   		</h:outputText>
													   	</td>									   
													</tr>
												</ui:repeat>		                            
			
			                                   </tbody>
			                               </table>
			
			                       	</div>
			                        <!-- /.table-responsive -->
			                
			                	</h:panelGroup> <!-- /.panel-itens -->
			                	
		                  	</div> 
		                  	<!-- /#box -->
			                  	
		            	</div>
		            	<!-- /.cod-md-12 -->
		            </h:panelGroup>
		            <!-- /.panel-logins -->
	            	
	            </h:form> <!--  end /frm-dash -->	                

            </div>
            <!-- /.container -->
        </div>
        <!-- /#content -->		
	
	</ui:define>
	<!-- END OF DEFINE CONTENT -->
	
	<!-- DEFINE FOOTER -->
	<ui:define name="footer">
	   	<ui:include src="/public/footer.xhtml" />
	</ui:define>
	<!-- END OF DEFINE FOOTER -->
	   
	<!-- DEFINE SCRIPT -->
	<ui:define name="script">
	</ui:define>
	<!-- END OF DEFINE SCRIPT -->			
			
</ui:composition>
