<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
	  template="/public/template_initial.xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

	<ui:define name="css">
		<!-- theme stylesheet venda -->
   		<h:outputStylesheet library="css" name="style.violet.css" id="theme-stylesheet"/>
	</ui:define>
 
	<!-- TOP BAR DEFINE -->
	<ui:define name="top_bar">
		<ui:include src="/private/site/venda/top_bar-venda.xhtml"/>
	</ui:define>
  
  	<!-- NAV BAR DEFINE -->
	<ui:define name="nav_bar">
		<ui:include src="/private/site/venda/nav_bar-venda.xhtml"/>
	</ui:define>	

	<!-- CONTENT DEFINE -->
	<ui:define name="page_content">	

		<div id="content">
            <div class="container">	
            
            	<h:form
            		id="frm-visualizacao">

					<div class="col-md-12">
                
	                    <ul class="breadcrumb">
	                        <li><a href="#">Home</a>
	                        </li>
	                        
	                        <li>Visualização de compra</li>
	                    </ul>
	                    
	                </div>
		
	                <div class="col-md-12">
	                	
	                	<h:messages 
				    	  	id="messages"
					      	errorClass="alert alert-block alert-danger fade in"
				     	 	style="padding-left:0px"
				     	 	globalOnly="true"/>   
				    </div>	
	
	                <div class="col-md-6">
	                               
	                    <div class="box" id="box-Compra">
	        	
	        				<h3>Informações da Compra</h3>
	        	
							<div class="row">
							
									<div class="col-md-6"> 
										<div class="form-group">
					                        
				                            <label for="input-cod">Código</label>
				                            <h:inputText 
				                            	class="form-control" 
				                            	id="input-cod" 
				                            	value="#{visualizaCompraBean.venda.codigoFormatado()}"
				                            	readonly="true"/>				                            	
					                 	</div>
					            	</div>
					
									<div class="col-md-6"> 
										<div class="form-group">
					                        
				                            <label for="input-status">Status</label>
				                            <h:inputText 
				                            	class="form-control" 
				                            	id="input-status" 
				                            	value="#{visualizaCompraBean.venda.status.descricao}"
				                            	readonly="true"/>		                            	
					                 	</div>
					            	</div>
					
									<div class="col-md-6"> 
										<div class="form-group">
					                        
				                            <label for="input-nome">Cliente</label>
				                            <h:inputText 
				                            	class="form-control" 
				                            	id="input-nome" 
				                            	value="#{visualizaCompraBean.venda.cliente.nome}"
				                            	readonly="true"/>				                            	
					                 	</div>
					            	</div>
					
									<div class="col-md-6"> 
										<div class="form-group">
					                        
				                            <label for="input-data">Data e hora</label>
				                            <h:inputText 
				                            	class="form-control" 
				                            	id="input-data" 
				                            	value="#{visualizaCompraBean.venda.horarioVenda}"
				                            	readonly="true">
				                            	
				                            	<f:converter
				                            		converterId="localDateTimeFacesConverter"/>
				                            </h:inputText>				                            	
					                 	</div>
					            	</div>
									
									<h:panelGroup
									rendered="#{visualizaCompraBean.venda.status == 'FINALIZADA'}">
									
										<div class="col-md-6">
							
											<div class="col-md-6"> 
												<div class="form-group">
							                        
						                            <label for="input-data-final">Finalização</label>
						                            <h:inputText 
						                            	class="form-control" 
						                            	id="input-data-final" 
						                            	value="#{visualizaCompraBean.venda.horarioFinalizacao}"
						                            	readonly="true">
						                            	
						                            	<f:converter
						                            		converterId="localDateTimeFacesConverter"/>
						                            </h:inputText>				                            	
							                 	</div>
							            	</div>
							            </div>
						        	</h:panelGroup>		
					            
									<div class="col-md-6"> 
										<div class="form-group">
					                        
				                            <label for="input-qtd-itens">Qtd de itens</label>
				                            <h:inputText 
				                            	class="form-control" 
				                            	id="input-qtd-intes" 
				                            	value="#{visualizaCompraBean.venda.qtdDeItens()}"
				                            	readonly="true">
				                            	
				                            	<f:convertNumber
				                            		type="number"
				                            		locale="pt_BR"/>
				                            </h:inputText>				                            	
					                 	</div>
					            	</div>
					
									<div class="col-md-6"> 
										<div class="form-group">
					                        
				                            <label for="input-desconto">Desconto %</label>
				                            <h:inputText
				                            	class="form-control" 
				                            	id="input-desconto" 
				                            	value="#{visualizaCompraBean.venda.descontoVenda}"
				                            	readonly="true">
				                            	
                                        		<f:convertNumber
                                        			locale="pt_BR"/>
				                            </h:inputText>				                            	
					                 	</div>
					            	</div>
					
									<div class="col-md-6"> 
										<div class="form-group">
					                        
				                            <label for="input-valor">Valor</label>
				                            <h:inputText 
				                            	class="form-control" 
				                            	id="input-valor" 
				                            	value="#{visualizaCompraBean.venda.valorComDesconto()}"
				                            	readonly="true">
				                            	
				                            	<f:convertNumber
				                            		type="currency"
				                            		locale="pt_BR"/>
				                            </h:inputText>				                            	
					                 	</div>
					            	</div>
						    		
					            
							</div>											

						</div>

						<!-- /.box-Compra -->
					</div>
				
					<!-- box-pagamento -->
					<div class="col-md-6">
	                               
	                    <div class="box" id="box-Compra">
	        	
	        				<h3>Pagamento</h3>
	        	
							<div class="row">
							
								<h:panelGroup
									rendered="#{not visualizaCompraBean.venda.isPaga()}">
									<div class="col-md-9"> 
										<p>A venda ainda não foi paga. </p>
										<p>Efetue o pagamento agora com seu cartão de crédito.</p>
									</div>
								</h:panelGroup>
							
								<h:panelGroup
									rendered="#{visualizaCompraBean.venda.isPaga()}">
							
									<div class="col-md-6"> 
										<div class="form-group">
					                        
				                            <label for="input-tipo">Tipo</label>
				                            <h:inputText 
				                            	class="form-control" 
				                            	id="input-tipo" 
				                            	value="#{visualizaCompraBean.pagamento.payment.type.descricao}"
				                            	readonly="true">
				                            </h:inputText>				                            	
					                 	</div>
					            	</div>
							
							
									<div class="col-md-6"> 
										<div class="form-group">
					                        
				                            <label for="input-cartao">Cartão</label>
				                            <h:inputText 
				                            	class="form-control" 
				                            	id="input-cartao" 
				                            	value="#{visualizaCompraBean.pagamento.payment.creditCard.cardNumber}"
				                            	readonly="true"/>				                            	
					                 	</div>
					            	</div>
					
									<div class="col-md-6"> 
										<div class="form-group">
					                        
				                            <label for="input-parcela">Parcela</label>
				                            <h:inputText 
				                            	class="form-control" 
				                            	id="input-parcela" 
				                            	value="#{visualizaCompraBean.pagamento.payment.installments}"
				                            	readonly="true"/>		                            	
					                 	</div>
					            	</div>
								</h:panelGroup> <!-- panel-paga -->
							</div>											

						</div>

						<!-- /.box-pagamento -->
					</div>				
				
			        <div class="col-md-12" id="table">
			
			            <div class="box">
			
		                    <h3>Itens da Compra</h3>
		                    
		                    <div class="table-responsive">
		                        <table class="table table-striped table-advance table-hover">
		                            <thead>
		                                <tr>
		                                	<th style="width:100px"></th>
		                                    <th>Código</th>
		                                    <th style="width:550px">Descrição</th>
		                                    <th style="width:300px">Grade</th>
		                                    <th style="width:160px">Grupo</th>
		                                    <th style="width:60px">Qtd</th>
		                                    <th style="width:100px">Valor unit.</th>
		                                    <th style="width:100px">Total</th>
		                                </tr>
		                            </thead>
		                            
		                            <tbody>
		                            
										<ui:repeat 
											var="item" 
										   	value="#{visualizaCompraBean.venda.itens}">		                          
											<tr>
												<td>
	                                        		<div class="thumbnail">
														<img src="#{res['image-server']}/imagens/meu-espaco/#{item.produto.buscaFotoPeloIndice(1)}"/>
													</div>
	                                        	</td>
											   <td>#{item.produto.codigoInterno}</td>
											   <td>#{item.produto.descricao}</td>
											   <td>#{item.grade}</td>										   
											   <td>#{item.produto.subgrupo.grupo.descricao}</td>
											   <td>
											   		<h:outputText 
											   			value="#{item.qtd}">
											   			
											   			<f:convertNumber 
											   				type="number"
											   				locale="pt_BR"/>
											   		</h:outputText>
											   </td>
										   	   <td>
											   		<h:outputText 
											   			value="#{item.valorUnitario}">
											   			
											   			<f:convertNumber 
											   				type="currency"
											   				locale="pt_BR"/>
											   		</h:outputText>
											   </td>		
										   	   <td>
											   		<h:outputText 
											   			value="#{item.total()}">
											   			
											   			<f:convertNumber 
											   				type="currency"
											   				locale="pt_BR"/>
											   		</h:outputText>
											   </td>												   									   
											</tr>
										</ui:repeat>		                            
	
	                                   </tbody>
	                               </table>
	
	                       	</div>
	                        <!-- /.table-responsive -->
	                  	</div> 
	                  	<!-- /#box -->
	                  	
	            	</div>
	            	<!-- /.cod-md-12 -->
	            </h:form>

            </div>
            <!-- /.container -->
        </div>
        <!-- /#content -->		
	
	</ui:define>
	<!-- END OF DEFINE CONTENT -->
	
	<!-- DEFINE FOOTER -->
	<ui:define name="footer">
	   	<ui:include src="/public/footer.xhtml" />
	</ui:define>
	<!-- END OF DEFINE FOOTER -->
	   
	<!-- DEFINE SCRIPT -->
	<ui:define name="script">
	</ui:define>
	<!-- END OF DEFINE SCRIPT -->			
			
</ui:composition>
